import{k as m,t as S,l as f,i as y,j as x,m as L,v as R,g as B,w as M,x as H,y as $,q as G,z as J,$ as V}from"../chunks/disclose-version.DdsrvPbs.js";import{K as U,x as A,a as C,N as E,g as b,z as p,Q as j,M as T,G as F}from"../chunks/runtime.6J5aEZU7.js";import{e as P,i as K,b as X,f as Z,r as ee,A as W,s as k,a as te,d as re,c as ae,Q as u,g as se,D as ne,h as ie}from"../chunks/randomKey.CvWxylyc.js";import{a as _,p as q}from"../chunks/props.DDMHF-id.js";import{b as oe}from"../chunks/this.32KUBlWl.js";var le=S('<div class="value svelte-1np6nxr"><span class="svelte-1np6nxr"> </span></div>'),de=S('<div class="col svelte-1np6nxr"><div class="head svelte-1np6nxr"><b class="svelte-1np6nxr"> </b></div> <!></div>'),ce=S('<div id="query-results" class="svelte-1np6nxr"></div>');function ve(i,t){U(t,!0);let e=A(_([[]]));C(()=>{if(t.rows.length===0){p(e,_([[]]));return}let r=[];for(let c=0;c<t.rows[0].columns.length;c++)r.push([]);for(let c of t.rows){let l=c.columns;for(let n=0;n<l.length;n++)r[n].push(l[n])}p(e,_(r))});function d(r){return[...new Uint8Array(r)].map(c=>c.toString(16).padStart(2,"0")).join("")}function o(r){return r.hasOwnProperty("Integer")?r.Integer:r.hasOwnProperty("Real")?r.Real:r.hasOwnProperty("Text")?r.Text:r.hasOwnProperty("Blob")?`x'${d(r.Blob)}'`:"NULL"}var s=ce();P(s,73,()=>b(e),K,(r,c,l)=>{var n=de(),w=y(n),a=y(w),h=y(a);f(a),f(w);var g=x(x(w,!0));P(g,65,()=>j(c),K,(v,O,Q)=>{var D=le(),I=y(D),Y=y(I);T(()=>L(Y,o(j(O).value))),f(I),f(D),m(v,D)}),f(n),T(()=>{var v;return L(h,(v=j(c)[0])==null?void 0:v.name)}),m(r,n)}),f(s),m(i,s),E()}function ue(i,t){i.ctrlKey&&i.code==="Enter"&&t()}var fe=S(`<textarea name="query" class="svelte-m4ye7i">
</textarea> <!>`,1);function _e(i,t){U(t,!0);let e=q(t,"query",7),d=A(_([]));C(()=>{e().query.startsWith(W)&&o()});async function o(){p(d,_([]));let l=[];for(let a of e().query.split(/\r?\n/))a.startsWith("--")||l.push(a);let n=l.join(`
`),w=await Z("/query",n);w.status===200?p(d,_(await w.json())):console.error(await w.json())}var s=fe(),r=B(s);ee(r),r.__keydown=[ue,o];var c=x(x(r,!0));ve(c,{get rows(){return b(d)},set rows(l){p(d,_(l))}}),X(r,()=>e().query,l=>e().query=l),m(i,s),E()}R(["keydown"]);var ye=M('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>');function he(i,t){let e=q(t,"color",0,"var(--col-err)"),d=q(t,"opacity",0,.9),o=q(t,"width",0,20);var s=ye();k(s,"stroke-width",2),y(s),f(s),T(()=>{k(s,"width",o()),k(s,"color",e()),k(s,"opacity",d())}),m(i,s)}function we(i,t,e,d){b(t)?i.code==="Enter"&&(i.preventDefault(),e()):d()}function N(i,t,e){t.onClose(e())}var pe=S('<div class="row svelte-y3tjne"><div role="button" tabindex="0"><!></div> <div class="close svelte-y3tjne"><div role="button" tabindex="0" class="close-inner svelte-y3tjne"><!></div></div></div>');function xe(i,t){U(t,!0);let e=q(t,"tab",7),d=q(t,"tabSelected",7),o,s=F(()=>d()===e());function r(){let v=o.innerText;e(v),d(v)}function c(){b(s)||d(e())}var l=pe(),n=y(l);oe(n,v=>o=v,()=>o),n.__click=c,n.__keydown=[we,s,r,c];var w=y(n);te(w,re(t),{}),f(n);var a=x(x(n,!0)),h=y(a);h.__click=[N,t,e],h.__keydown=[N,t,e];var g=y(h);he(g,{}),f(h),f(a),f(l),T(()=>{ae(n,`${(b(s)?"tab selected":"tab")??""} svelte-y3tjne`),k(n,"contenteditable",b(s))}),H("blur",n,r,!1),m(i,l),E()}R(["click","keydown"]);var be=M('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path></svg>');function me(i,t){let e=q(t,"opacity",0,.9),d=q(t,"width",0,24);var o=be();k(o,"stroke-width",2),y(o),f(o),T(()=>{k(o,"width",d()),k(o,"opacity",e())}),m(i,o)}function z(){u.push({id:se(6),query:ne})}var ge=S('<div id="tabs" class="svelte-213zom"><!> <div role="button" tabindex="0" title="Add New Tab" class="ctrl add-new svelte-213zom"><!></div></div> <!>',1);function ke(i,t){U(t,!0);let e=A(_(u[0].id)),d=F(()=>u.filter(a=>a.id===b(e))[0]);C(()=>{let a=u[u.length-1];console.log(a.query),a!=null&&a.query.startsWith(W)&&p(e,_(a.id))});function o(a){let g=u.map(v=>v.id).indexOf(a);b(e)===a?u.length===1?(u.push(ie),u.shift(),p(e,_(u[0].id))):g===0?(u.shift(),p(e,_(u[0].id))):(u.splice(g,1),p(e,_(u[g-1].id))):u.splice(g,1)}var s=ge(),r=B(s),c=y(r);P(c,69,()=>u,(a,h)=>a.id,(a,h,g)=>{xe(a,{get tab(){return j(h).id},set tab(v){j(h).id=v},get tabSelected(){return b(e)},set tabSelected(v){p(e,_(v))},onClose:o,children:(v,O)=>{$();var Q=G();T(()=>L(Q,j(h).id)),m(v,Q)},$$slots:{default:!0}})});var l=x(x(c,!0));l.__click=[z],l.__keydown=[z];var n=y(l);me(n,{}),f(l),f(r);var w=x(x(r,!0));_e(w,{get query(){return b(d)}}),m(i,s),E()}R(["click","keydown"]);var qe=S('<meta property="description" content="Hiqlite Dashboard">');function Qe(i){J(t=>{var e=qe();V.title="Hiqlite",m(t,e)}),ke(i,{$$legacy:!0})}export{Qe as component};
