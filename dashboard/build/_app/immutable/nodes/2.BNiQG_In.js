import{i as p,k as i,t as d,l as n,g as O,m as $,j as y,n as S,o as A,$ as D}from"../chunks/disclose-version.BOIiZiqf.js";import{G as R,I as T,H as P,J as w,f as L,h as b,k as B}from"../chunks/runtime.-QwJaGF5.js";import{e as k,i as I,b as F,p as H,A as K,r as U}from"../chunks/fetch.DLS_NjMY.js";import{i as C,p as G,a as x}from"../chunks/props.DG0Z0YZk.js";var J=d('<div class="col svelte-1otk4md"><b> </b></div>'),M=d('<div class="col svelte-1otk4md"> </div>'),N=d('<div class="row svelte-1otk4md"></div>'),Q=d('<div class="row head svelte-1otk4md"></div> <div class="rows svelte-1otk4md"></div>',1),X=d('<div id="query-results" class="svelte-1otk4md"><!></div>');function z(a,t){R(t,!0);function s(e){return[...new Uint8Array(e)].map(v=>v.toString(16).padStart(2,"0")).join("")}function l(e){return e.hasOwnProperty("Integer")?e.Integer:e.hasOwnProperty("Real")?e.Real:e.hasOwnProperty("Text")?e.Text:e.hasOwnProperty("Blob")?`x'${s(e.Blob)}'`:"NULL"}var c=X(),u=p(c);C(u,()=>t.rows.length>0,e=>{var v=Q(),r=O(v);k(r,77,()=>t.rows[0].columns,(m,f)=>w(m).name,(m,f,j)=>{var o=J(),_=p(o),h=p(_);n(_),n(o),P(()=>$(h,w(f).name)),i(m,o)}),n(r);var q=y(y(r,!0));k(q,73,()=>t.rows,I,(m,f,j)=>{var o=N();k(o,73,()=>w(f).columns,I,(_,h,ee)=>{var g=M(),E=p(g);P(()=>$(E,l(w(h).value))),n(g),i(_,g)}),n(o),i(m,o)}),n(q),i(e,v)}),n(c),i(a,c),T()}function V(a,t){a.ctrlKey&&a.code==="Enter"&&(console.log("ctrl + enter"),t())}var W=d(`<textarea name="query" class="svelte-mxet2g">
</textarea> <!>`,1);function Y(a,t){R(t,!0);let s=G(t,"query",7),l=L(x([]));async function c(){b(l,x([]));let r=await H(`${K}/query`,s());r.status===200?b(l,x(await r.json())):console.error(await r.json())}var u=W(),e=O(u);U(e),e.__keydown=[V,c];var v=y(y(e,!0));z(v,{get rows(){return B(l)},set rows(r){b(l,x(r))}}),F(e,s,r=>s(r)),i(a,u),T()}S(["keydown"]);var Z=d('<meta property="description" content="Hiqlite Dashboard">');function oe(a){A(t=>{var s=Z();D.title="Dashboard",i(t,s)}),Y(a,{query:"SELECT * FROM _metadata",$$legacy:!0})}export{oe as component};
