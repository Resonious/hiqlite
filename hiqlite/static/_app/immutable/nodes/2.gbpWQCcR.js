import{k as g,t as _,l as h,i as w,j as b,m as S,v as T,g as H,w as I,x as F,y as G,q as J,z as V,$ as X}from"../chunks/disclose-version.BRbACjsT.js";import{K as B,g as L,u as A,N as C,m as k,j as m,Q as O,M as $,B as K}from"../chunks/runtime.BHI6S4kR.js";import{e as D,i as Q,b as Y,f as Z,r as ee,A as N,s as j,a as te,d as se,c as ae,Q as p,g as re,D as ie,h as oe}from"../chunks/randomKey.BhFn_g0n.js";import{a as c,p as x,i as le}from"../chunks/props.rcOLO-NW.js";import{b as ne}from"../chunks/this.kinYft9d.js";var ve=_('<div class="value svelte-93qrvr"><span class="svelte-93qrvr"> </span></div>'),de=_('<div class="col svelte-93qrvr"><div class="head svelte-93qrvr"><b class="svelte-93qrvr"> </b></div> <!></div>'),ce=_('<div id="query-results" class="svelte-93qrvr"></div>');function ue(n,t){B(t,!0);let e=L(c([[]]));A(()=>{if(t.rows.length===0){m(e,c([[]]));return}let s=[];for(let v=0;v<t.rows[0].columns.length;(v+=1)-1)s.push([]);for(let v of t.rows){let y=v.columns;for(let i=0;i<y.length;(i+=1)-1)s[i].push(y[i])}m(e,c(s))});function d(s){return[...new Uint8Array(s)].map(v=>v.toString(16).padStart(2,"0")).join("")}function l(s){return s.hasOwnProperty("Integer")?s.Integer:s.hasOwnProperty("Real")?s.Real:s.hasOwnProperty("Text")?s.Text:s.hasOwnProperty("Blob")?`x'${d(s.Blob)}'`:"NULL"}var r=ce();D(r,73,()=>k(e),Q,(s,v,y)=>{var i=de(),u=w(i),a=w(u),o=w(a);h(a),h(u);var q=b(b(u,!0));D(q,65,()=>O(v),Q,(f,W,M)=>{var P=ve(),E=w(P),z=w(E);$(()=>S(z,l(O(W).value))),h(E),h(P),g(f,P)}),h(i),$(()=>{var f;return S(o,(f=O(v)[0])==null?void 0:f.name)}),g(s,i)}),h(r),g(n,r),C()}function pe(n,t){n.ctrlKey&&n.code==="Enter"&&t()}var ye=_('<div class="err"> </div>'),fe=_(`<textarea name="query" class="svelte-m4ye7i">
</textarea> <!> <!>`,1);function he(n,t){B(t,!0);let e=x(t,"query",7),d=L(c([])),l=L("");A(()=>{e().query.startsWith(N)&&(e().query=e().query.replace(`${N}
`,""),r())});async function r(){m(d,c([])),m(l,"");let u=[];for(let q of e().query.split(/\r?\n/))q.startsWith("--")||u.push(q);let a=u.join(`
`),o=await Z("/query",a);if(o.status===200)m(d,c(await o.json()));else{let q=await o.json();m(l,c(Object.values(q)[0]))}}var s=fe(),v=H(s);ee(v),v.__keydown=[pe,r];var y=b(b(v,!0));le(y,()=>k(l),u=>{var a=ye(),o=w(a);h(a),$(()=>S(o,k(l))),g(u,a)});var i=b(b(y,!0));ue(i,{get rows(){return k(d)},set rows(u){m(d,c(u))}}),Y(v,()=>e().query,u=>e().query=u),g(n,s),C()}T(["keydown"]);var we=I('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>');function be(n,t){let e=x(t,"color",0,"var(--col-err)"),d=x(t,"opacity",0,.9),l=x(t,"width",0,20);var r=we();j(r,"stroke-width",2),w(r),h(r),$(()=>{j(r,"width",l()),j(r,"color",e()),j(r,"opacity",d())}),g(n,r)}function ke(n,t,e,d){k(t)?n.code==="Enter"&&(n.preventDefault(),e()):d()}function R(n,t,e){t.onClose(e())}var me=_('<div class="row svelte-17j88sk"><div role="button" tabindex="0"><!></div> <div class="close svelte-17j88sk"><div role="button" tabindex="0" class="close-inner svelte-17j88sk"><!></div></div></div>');function qe(n,t){B(t,!0);let e=x(t,"tab",7),d=x(t,"tabSelected",7),l,r=K(()=>d()===e());function s(){let f=l.innerText;e(c(f)),d(c(f))}function v(){k(r)||d(c(e()))}var y=me(),i=w(y);ne(i,f=>l=f,()=>l),i.__click=v,i.__keydown=[ke,r,s,v];var u=w(i);te(u,se(t),{}),h(i);var a=b(b(i,!0)),o=w(a);o.__click=[R,t,e],o.__keydown=[R,t,e];var q=w(o);be(q,{}),h(o),h(a),h(y),$(()=>{ae(i,`${(k(r)?"tab selected":"tab")??""} svelte-17j88sk`),j(i,"contenteditable",k(r))}),F("blur",i,s),g(n,y),C()}T(["click","keydown"]);var ge=I('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path></svg>');function _e(n,t){let e=x(t,"opacity",0,.9),d=x(t,"width",0,24);var l=ge();j(l,"stroke-width",2),w(l),h(l),$(()=>{j(l,"width",d()),j(l,"opacity",e())}),g(n,l)}function U(){p.push({id:re(6),query:ie})}var je=_('<div id="tabs" class="svelte-9cpjlp"><!> <div role="button" tabindex="0" title="Add New Tab" class="ctrl add-new svelte-9cpjlp"><!></div></div> <!>',1);function xe(n,t){B(t,!0);let e=L(c(p[0].id)),d=K(()=>p.filter(a=>a.id===k(e))[0]);A(()=>{let a=p[p.length-1];a!=null&&a.query.startsWith(N)&&m(e,c(a.id))});function l(a){let o=p.map(q=>q.id).indexOf(a);k(e)===a?p.length===1?(p.push(oe),p.shift(),m(e,c(p[0].id))):o===0?(p.shift(),m(e,c(p[0].id))):(p.splice(o,1),m(e,c(p[o-1].id))):p.splice(o,1)}var r=je(),s=H(r),v=w(s);D(v,69,()=>p,(a,o)=>a.id,(a,o,q)=>{qe(a,{get tab(){return O(o).id},set tab(f){O(o).id=f},get tabSelected(){return k(e)},set tabSelected(f){m(e,c(f))},onClose:l,children:(f,W)=>{G();var M=J();$(()=>S(M,O(o).id)),g(f,M)},$$slots:{default:!0}})});var y=b(b(v,!0));y.__click=[U],y.__keydown=[U];var i=w(y);_e(i,{}),h(y),h(s);var u=b(b(s,!0));he(u,{get query(){return k(d)}}),g(n,r),C()}T(["click","keydown"]);var $e=_('<meta property="description" content="Hiqlite Dashboard">');function Oe(n){V(t=>{var e=$e();X.title="Hiqlite",g(t,e)}),xe(n,{$$legacy:!0})}export{Oe as component};
