import{k as q,t as j,l as h,i as y,j as w,m as S,v as T,g as H,w as I,x as F,y as G,q as J,z as V,$ as X}from"../chunks/disclose-version.CB8Axd_2.js";import{K as B,g as L,u as A,N as C,m as b,j as k,Q as O,M as $,B as K}from"../chunks/runtime.DkIe4pcg.js";import{e as D,i as Q,b as Y,f as Z,r as ee,A as N,s as x,a as te,d as se,c as ae,Q as u,g as re,D as ie,h as oe}from"../chunks/randomKey.Cr1IQtC7.js";import{a as m,p as _,i as le}from"../chunks/props.CsIpsegE.js";import{b as ne}from"../chunks/this.BEj325DU.js";var ce=j('<div class="value svelte-1m6c23m"><span class="svelte-1m6c23m"> </span></div>'),de=j('<div class="col svelte-1m6c23m"><div class="head svelte-1m6c23m"><b class="svelte-1m6c23m"> </b></div> <!></div>'),ve=j('<div id="query-results" class="svelte-1m6c23m"></div>');function ue(n,t){B(t,!0);let e=L(m([[]]));A(()=>{if(t.rows.length===0){k(e,m([[]]));return}let s=[];for(let c=0;c<t.rows[0].columns.length;c++)s.push([]);for(let c of t.rows){let p=c.columns;for(let i=0;i<p.length;i++)s[i].push(p[i])}k(e,m(s))});function d(s){return[...new Uint8Array(s)].map(c=>c.toString(16).padStart(2,"0")).join("")}function l(s){return s.hasOwnProperty("Integer")?s.Integer:s.hasOwnProperty("Real")?s.Real:s.hasOwnProperty("Text")?s.Text:s.hasOwnProperty("Blob")?`x'${d(s.Blob)}'`:"NULL"}var r=ve();D(r,73,()=>b(e),Q,(s,c,p)=>{var i=de(),v=y(i),a=y(v),o=y(a);h(a),h(v);var g=w(w(v,!0));D(g,65,()=>O(c),Q,(f,W,M)=>{var P=ce(),E=y(P),z=y(E);$(()=>S(z,l(O(W).value))),h(E),h(P),q(f,P)}),h(i),$(()=>{var f;return S(o,(f=O(c)[0])==null?void 0:f.name)}),q(s,i)}),h(r),q(n,r),C()}function pe(n,t){n.ctrlKey&&n.code==="Enter"&&t()}var fe=j('<div class="err"> </div>'),he=j(`<textarea name="query" class="svelte-m4ye7i">
</textarea> <!> <!>`,1);function ye(n,t){B(t,!0);let e=_(t,"query",7),d=L(m([])),l=L("");A(()=>{e().query.startsWith(N)&&(e().query=e().query.replace(`${N}
`,""),r())});async function r(){k(d,m([])),k(l,"");let v=[];for(let g of e().query.split(/\r?\n/))g.startsWith("--")||v.push(g);let a=v.join(`
`),o=await Z("/query",a);if(o.status===200)k(d,m(await o.json()));else{let g=await o.json();k(l,m(Object.values(g)[0]))}}var s=he(),c=H(s);ee(c),c.__keydown=[pe,r];var p=w(w(c,!0));le(p,()=>b(l),v=>{var a=fe(),o=y(a);h(a),$(()=>S(o,b(l))),q(v,a)});var i=w(w(p,!0));ue(i,{get rows(){return b(d)},set rows(v){k(d,m(v))}}),Y(c,()=>e().query,v=>e().query=v),q(n,s),C()}T(["keydown"]);var me=I('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>');function we(n,t){let e=_(t,"color",0,"var(--col-err)"),d=_(t,"opacity",0,.9),l=_(t,"width",0,20);var r=me();x(r,"stroke-width",2),y(r),h(r),$(()=>{x(r,"width",l()),x(r,"color",e()),x(r,"opacity",d())}),q(n,r)}function be(n,t,e,d){b(t)?n.code==="Enter"&&(n.preventDefault(),e()):d()}function R(n,t,e){t.onClose(e())}var ke=j('<div class="row svelte-17j88sk"><div role="button" tabindex="0"><!></div> <div class="close svelte-17j88sk"><div role="button" tabindex="0" class="close-inner svelte-17j88sk"><!></div></div></div>');function ge(n,t){B(t,!0);let e=_(t,"tab",7),d=_(t,"tabSelected",7),l,r=K(()=>d()===e());function s(){let f=l.innerText;e(f),d(f)}function c(){b(r)||d(e())}var p=ke(),i=y(p);ne(i,f=>l=f,()=>l),i.__click=c,i.__keydown=[be,r,s,c];var v=y(i);te(v,se(t),{}),h(i);var a=w(w(i,!0)),o=y(a);o.__click=[R,t,e],o.__keydown=[R,t,e];var g=y(o);we(g,{}),h(o),h(a),h(p),$(()=>{ae(i,`${(b(r)?"tab selected":"tab")??""} svelte-17j88sk`),x(i,"contenteditable",b(r))}),F("blur",i,s),q(n,p),C()}T(["click","keydown"]);var qe=I('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path></svg>');function je(n,t){let e=_(t,"opacity",0,.9),d=_(t,"width",0,24);var l=qe();x(l,"stroke-width",2),y(l),h(l),$(()=>{x(l,"width",d()),x(l,"opacity",e())}),q(n,l)}function U(){u.push({id:re(6),query:ie})}var xe=j('<div id="tabs" class="svelte-9cpjlp"><!> <div role="button" tabindex="0" title="Add New Tab" class="ctrl add-new svelte-9cpjlp"><!></div></div> <!>',1);function _e(n,t){B(t,!0);let e=L(m(u[0].id)),d=K(()=>u.filter(a=>a.id===b(e))[0]);A(()=>{let a=u[u.length-1];a!=null&&a.query.startsWith(N)&&k(e,m(a.id))});function l(a){let o=u.map(g=>g.id).indexOf(a);b(e)===a?u.length===1?(u.push(oe),u.shift(),k(e,m(u[0].id))):o===0?(u.shift(),k(e,m(u[0].id))):(u.splice(o,1),k(e,m(u[o-1].id))):u.splice(o,1)}var r=xe(),s=H(r),c=y(s);D(c,69,()=>u,(a,o)=>a.id,(a,o,g)=>{ge(a,{get tab(){return O(o).id},set tab(f){O(o).id=f},get tabSelected(){return b(e)},set tabSelected(f){k(e,m(f))},onClose:l,children:(f,W)=>{G();var M=J();$(()=>S(M,O(o).id)),q(f,M)},$$slots:{default:!0}})});var p=w(w(c,!0));p.__click=[U],p.__keydown=[U];var i=y(p);je(i,{}),h(p),h(s);var v=w(w(s,!0));ye(v,{get query(){return b(d)}}),q(n,r),C()}T(["click","keydown"]);var $e=j('<meta property="description" content="Hiqlite Dashboard">');function Oe(n){V(t=>{var e=$e();X.title="Hiqlite",q(t,e)}),_e(n,{$$legacy:!0})}export{Oe as component};
