import{k as g,t as j,l as h,i as w,j as b,m as U,v as A,g as $,w as F,x as H,y as z,q as G,z as J,$ as V}from"../chunks/disclose-version.qK62O8CE.js";import{K as Q,g as E,u as C,N as D,m as x,j as p,Q as T,M as S,B as W}from"../chunks/runtime.C5PoW8Qe.js";import{e as P,i as K,b as X,f as Z,r as ee,A as R,s as k,a as te,d as re,c as ae,Q as f,g as se,D as ie,h as oe}from"../chunks/randomKey.25NKGL9w.js";import{a as y,p as q,i as ne}from"../chunks/props.W7_Xz9Ax.js";import{b as le}from"../chunks/this.f_oAbJWV.js";var de=j('<div class="value svelte-1m6c23m"><span class="svelte-1m6c23m"> </span></div>'),ce=j('<div class="col svelte-1m6c23m"><div class="head svelte-1m6c23m"><b class="svelte-1m6c23m"> </b></div> <!></div>'),ve=j('<div id="query-results" class="svelte-1m6c23m"></div>');function ue(n,t){Q(t,!0);let e=E(y([[]]));C(()=>{if(t.rows.length===0){p(e,y([[]]));return}let r=[];for(let l=0;l<t.rows[0].columns.length;l++)r.push([]);for(let l of t.rows){let _=l.columns;for(let i=0;i<_.length;i++)r[i].push(_[i])}p(e,y(r))});function d(r){return[...new Uint8Array(r)].map(l=>l.toString(16).padStart(2,"0")).join("")}function o(r){return r.hasOwnProperty("Integer")?r.Integer:r.hasOwnProperty("Real")?r.Real:r.hasOwnProperty("Text")?r.Text:r.hasOwnProperty("Blob")?`x'${d(r.Blob)}'`:"NULL"}var s=ve();P(s,73,()=>x(e),K,(r,l,_)=>{var i=ce(),u=w(i),a=w(u),c=w(a);h(a),h(u);var m=b(b(u,!0));P(m,65,()=>T(l),K,(v,B,L)=>{var O=de(),I=w(O),Y=w(I);S(()=>U(Y,o(T(B).value))),h(I),h(O),g(v,O)}),h(i),S(()=>{var v;return U(c,(v=T(l)[0])==null?void 0:v.name)}),g(r,i)}),h(s),g(n,s),D()}function fe(n,t){n.ctrlKey&&n.code==="Enter"&&t()}var _e=j('<div class="err"> </div>'),he=j(`<textarea name="query" class="svelte-m4ye7i">
</textarea> <!> <!>`,1);function me(n,t){Q(t,!0);let e=q(t,"query",7),d=E(y([])),o=E("");C(()=>{e().query.startsWith(R)&&(e().query=e().query.replace(`${R}
`,""),s())});async function s(){p(d,y([])),p(o,"");let u=[];for(let m of e().query.split(/\r?\n/))m.startsWith("--")||u.push(m);let a=u.join(`
`),c=await Z("/query",a);if(c.status===200)p(d,y(await c.json()));else{let m=await c.json();p(o,y(Object.values(m)[0]))}}var r=he(),l=$(r);ee(l),l.__keydown=[fe,s];var _=b(b(l,!0));ne(_,()=>x(o),u=>{var a=_e(),c=w(a);h(a),S(()=>U(c,x(o))),g(u,a)});var i=b(b(_,!0));ue(i,{get rows(){return x(d)},set rows(u){p(d,y(u))}}),X(l,()=>e().query,u=>e().query=u),g(n,r),D()}A(["keydown"]);var ye=F('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>');function we(n,t){let e=q(t,"color",0,"var(--col-err)"),d=q(t,"opacity",0,.9),o=q(t,"width",0,20);var s=ye();k(s,"stroke-width",2),w(s),h(s),S(()=>{k(s,"width",o()),k(s,"color",e()),k(s,"opacity",d())}),g(n,s)}function pe(n,t,e,d){x(t)?n.code==="Enter"&&(n.preventDefault(),e()):d()}function N(n,t,e){t.onClose(e())}var be=j('<div class="row svelte-17j88sk"><div role="button" tabindex="0"><!></div> <div class="close svelte-17j88sk"><div role="button" tabindex="0" class="close-inner svelte-17j88sk"><!></div></div></div>');function xe(n,t){Q(t,!0);let e=q(t,"tab",7),d=q(t,"tabSelected",7),o,s=W(()=>d()===e());function r(){let v=o.innerText;e(v),d(v)}function l(){x(s)||d(e())}var _=be(),i=w(_);le(i,v=>o=v,()=>o),i.__click=l,i.__keydown=[pe,s,r,l];var u=w(i);te(u,re(t),{}),h(i);var a=b(b(i,!0)),c=w(a);c.__click=[N,t,e],c.__keydown=[N,t,e];var m=w(c);we(m,{}),h(c),h(a),h(_),S(()=>{ae(i,`${(x(s)?"tab selected":"tab")??""} svelte-17j88sk`),k(i,"contenteditable",x(s))}),H("blur",i,r),g(n,_),D()}A(["click","keydown"]);var ge=F('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path></svg>');function ke(n,t){let e=q(t,"opacity",0,.9),d=q(t,"width",0,24);var o=ge();k(o,"stroke-width",2),w(o),h(o),S(()=>{k(o,"width",d()),k(o,"opacity",e())}),g(n,o)}function M(){f.push({id:se(6),query:ie})}var qe=j('<div id="tabs" class="svelte-9cpjlp"><!> <div role="button" tabindex="0" title="Add New Tab" class="ctrl add-new svelte-9cpjlp"><!></div></div> <!>',1);function je(n,t){Q(t,!0);let e=E(y(f[0].id)),d=W(()=>f.filter(a=>a.id===x(e))[0]);C(()=>{let a=f[f.length-1];a!=null&&a.query.startsWith(R)&&p(e,y(a.id))});function o(a){let m=f.map(v=>v.id).indexOf(a);x(e)===a?f.length===1?(f.push(oe),f.shift(),p(e,y(f[0].id))):m===0?(f.shift(),p(e,y(f[0].id))):(f.splice(m,1),p(e,y(f[m-1].id))):f.splice(m,1)}var s=qe(),r=$(s),l=w(r);P(l,69,()=>f,(a,c)=>a.id,(a,c,m)=>{xe(a,{get tab(){return T(c).id},set tab(v){T(c).id=v},get tabSelected(){return x(e)},set tabSelected(v){p(e,y(v))},onClose:o,children:(v,B)=>{z();var L=G();S(()=>U(L,T(c).id)),g(v,L)},$$slots:{default:!0}})});var _=b(b(l,!0));_.__click=[M],_.__keydown=[M];var i=w(_);ke(i,{}),h(_),h(r);var u=b(b(r,!0));me(u,{get query(){return x(d)}}),g(n,s),D()}A(["click","keydown"]);var Se=j('<meta property="description" content="Hiqlite Dashboard">');function Le(n){J(t=>{var e=Se();V.title="Hiqlite",g(t,e)}),je(n,{$$legacy:!0})}export{Le as component};
