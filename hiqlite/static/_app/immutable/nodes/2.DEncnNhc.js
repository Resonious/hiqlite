import{k as _,t as q,l as y,i as h,j as w,m as S,v as T,g as H,w as I,x as F,y as G,q as J,z as V,$ as X}from"../chunks/disclose-version.BRbACjsT.js";import{K as B,g as L,u as A,N as C,m as b,j as k,Q as O,M as $,B as K}from"../chunks/runtime.BHI6S4kR.js";import{e as D,i as Q,b as Y,f as Z,r as ee,A as N,s as j,a as te,d as se,c as ae,Q as p,g as re,D as ie,h as oe}from"../chunks/randomKey.BhFn_g0n.js";import{a as v,p as x,i as le}from"../chunks/props.rcOLO-NW.js";import{b as ne}from"../chunks/this.kinYft9d.js";var ce=q('<div class="value svelte-1m6c23m"><span class="svelte-1m6c23m"> </span></div>'),de=q('<div class="col svelte-1m6c23m"><div class="head svelte-1m6c23m"><b class="svelte-1m6c23m"> </b></div> <!></div>'),ve=q('<div id="query-results" class="svelte-1m6c23m"></div>');function ue(n,t){B(t,!0);let e=L(v([[]]));A(()=>{if(t.rows.length===0){k(e,v([[]]));return}let s=[];for(let c=0;c<t.rows[0].columns.length;(c+=1)-1)s.push([]);for(let c of t.rows){let f=c.columns;for(let i=0;i<f.length;(i+=1)-1)s[i].push(f[i])}k(e,v(s))});function d(s){return[...new Uint8Array(s)].map(c=>c.toString(16).padStart(2,"0")).join("")}function l(s){return s.hasOwnProperty("Integer")?s.Integer:s.hasOwnProperty("Real")?s.Real:s.hasOwnProperty("Text")?s.Text:s.hasOwnProperty("Blob")?`x'${d(s.Blob)}'`:"NULL"}var r=ve();D(r,73,()=>b(e),Q,(s,c,f)=>{var i=de(),u=h(i),a=h(u),o=h(a);y(a),y(u);var g=w(w(u,!0));D(g,65,()=>O(c),Q,(m,W,M)=>{var P=ce(),E=h(P),z=h(E);$(()=>S(z,l(O(W).value))),y(E),y(P),_(m,P)}),y(i),$(()=>{var m;return S(o,(m=O(c)[0])==null?void 0:m.name)}),_(s,i)}),y(r),_(n,r),C()}function pe(n,t){n.ctrlKey&&n.code==="Enter"&&t()}var fe=q('<div class="err"> </div>'),me=q(`<textarea name="query" class="svelte-m4ye7i">
</textarea> <!> <!>`,1);function ye(n,t){B(t,!0);let e=x(t,"query",7),d=L(v([])),l=L("");A(()=>{e().query.startsWith(N)&&(e().query=e().query.replace(`${N}
`,""),r())});async function r(){k(d,v([])),k(l,"");let u=[];for(let g of e().query.split(/\r?\n/))g.startsWith("--")||u.push(g);let a=u.join(`
`),o=await Z("/query",a);if(o.status===200)k(d,v(await o.json()));else{let g=await o.json();k(l,v(Object.values(g)[0]))}}var s=me(),c=H(s);ee(c),c.__keydown=[pe,r];var f=w(w(c,!0));le(f,()=>b(l),u=>{var a=fe(),o=h(a);y(a),$(()=>S(o,b(l))),_(u,a)});var i=w(w(f,!0));ue(i,{get rows(){return b(d)},set rows(u){k(d,v(u))}}),Y(c,()=>e().query,u=>e().query=u),_(n,s),C()}T(["keydown"]);var he=I('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>');function we(n,t){let e=x(t,"color",0,"var(--col-err)"),d=x(t,"opacity",0,.9),l=x(t,"width",0,20);var r=he();j(r,"stroke-width",2),h(r),y(r),$(()=>{j(r,"width",l()),j(r,"color",e()),j(r,"opacity",d())}),_(n,r)}function be(n,t,e,d){b(t)?n.code==="Enter"&&(n.preventDefault(),e()):d()}function R(n,t,e){t.onClose(e())}var ke=q('<div class="row svelte-17j88sk"><div role="button" tabindex="0"><!></div> <div class="close svelte-17j88sk"><div role="button" tabindex="0" class="close-inner svelte-17j88sk"><!></div></div></div>');function ge(n,t){B(t,!0);let e=x(t,"tab",7),d=x(t,"tabSelected",7),l,r=K(()=>d()===e());function s(){let m=l.innerText;e(v(m)),d(v(m))}function c(){b(r)||d(v(e()))}var f=ke(),i=h(f);ne(i,m=>l=m,()=>l),i.__click=c,i.__keydown=[be,r,s,c];var u=h(i);te(u,se(t),{}),y(i);var a=w(w(i,!0)),o=h(a);o.__click=[R,t,e],o.__keydown=[R,t,e];var g=h(o);we(g,{}),y(o),y(a),y(f),$(()=>{ae(i,`${(b(r)?"tab selected":"tab")??""} svelte-17j88sk`),j(i,"contenteditable",b(r))}),F("blur",i,s),_(n,f),C()}T(["click","keydown"]);var _e=I('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path></svg>');function qe(n,t){let e=x(t,"opacity",0,.9),d=x(t,"width",0,24);var l=_e();j(l,"stroke-width",2),h(l),y(l),$(()=>{j(l,"width",d()),j(l,"opacity",e())}),_(n,l)}function U(){p.push({id:re(6),query:ie})}var je=q('<div id="tabs" class="svelte-9cpjlp"><!> <div role="button" tabindex="0" title="Add New Tab" class="ctrl add-new svelte-9cpjlp"><!></div></div> <!>',1);function xe(n,t){B(t,!0);let e=L(v(p[0].id)),d=K(()=>p.filter(a=>a.id===b(e))[0]);A(()=>{let a=p[p.length-1];a!=null&&a.query.startsWith(N)&&k(e,v(a.id))});function l(a){let o=p.map(g=>g.id).indexOf(a);b(e)===a?p.length===1?(p.push(oe),p.shift(),k(e,v(p[0].id))):o===0?(p.shift(),k(e,v(p[0].id))):(p.splice(o,1),k(e,v(p[o-1].id))):p.splice(o,1)}var r=je(),s=H(r),c=h(s);D(c,69,()=>p,(a,o)=>a.id,(a,o,g)=>{ge(a,{get tab(){return O(o).id},set tab(m){O(o).id=m},get tabSelected(){return b(e)},set tabSelected(m){k(e,v(m))},onClose:l,children:(m,W)=>{G();var M=J();$(()=>S(M,O(o).id)),_(m,M)},$$slots:{default:!0}})});var f=w(w(c,!0));f.__click=[U],f.__keydown=[U];var i=h(f);qe(i,{}),y(f),y(s);var u=w(w(s,!0));ye(u,{get query(){return b(d)}}),_(n,r),C()}T(["click","keydown"]);var $e=q('<meta property="description" content="Hiqlite Dashboard">');function Oe(n){V(t=>{var e=$e();X.title="Hiqlite",_(t,e)}),xe(n,{$$legacy:!0})}export{Oe as component};
