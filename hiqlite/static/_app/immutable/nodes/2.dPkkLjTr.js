import{a as m,t as q,s as $,d as P,n as L,e as K,b as Q,f as Y}from"../chunks/disclose-version.D46uvwri.js";import{Y as B,a6 as C,u as T,$ as M,i as p,a1 as w,g as b,a0 as k,a2 as S,_ as j,Z as W,M as H,am as Z,an as z}from"../chunks/runtime.Blj131-X.js";import{e as A,i as I,b as F,f as G,r as J,A as D,s as g,a as V,d as X,c as ee,Q as f,g as te,D as ae,h as se}from"../chunks/randomKey.C7mtzA3k.js";import{a as y,p as _,i as re}from"../chunks/props.DuX1E6kY.js";import{b as ne}from"../chunks/this.ChyhuXgy.js";var ie=q('<div class="value svelte-93qrvr"><span class="svelte-93qrvr"> </span></div>'),oe=q('<div class="col svelte-93qrvr"><div class="head svelte-93qrvr"><b class="svelte-93qrvr"> </b></div> <!></div>'),le=q('<div id="query-results" class="svelte-93qrvr"></div>');function ve(i,t){B(t,!0);let e=C(y([[]]));T(()=>{if(t.rows.length===0){b(e,y([[]]));return}let a=[];for(let l=0;l<t.rows[0].columns.length;(l+=1)-1)a.push([]);for(let l of t.rows){let u=l.columns;for(let r=0;r<u.length;(r+=1)-1)a[r].push(u[r])}b(e,y(a))});function d(a){return[...new Uint8Array(a)].map(l=>l.toString(16).padStart(2,"0")).join("")}function v(a){return a.hasOwnProperty("Integer")?a.Integer:a.hasOwnProperty("Real")?a.Real:a.hasOwnProperty("Text")?a.Text:a.hasOwnProperty("Blob")?`x'${d(a.Blob)}'`:"NULL"}var o=le();A(o,21,()=>p(e),I,(a,l)=>{var u=oe(),r=k(u),h=k(r),s=k(h);w(h),w(r);var n=S(r,2);A(n,17,()=>p(l),I,(c,x)=>{var O=ie(),E=k(O),U=k(E);j(()=>$(U,v(p(x).value))),w(E),w(O),m(c,O)}),w(u),j(()=>{var c;return $(s,(c=p(l)[0])==null?void 0:c.name)}),m(a,u)}),w(o),m(i,o),M()}function ce(i,t){i.ctrlKey&&i.code==="Enter"&&t()}var de=q('<div class="err"> </div>'),ue=q(`<textarea name="query" class="svelte-m4ye7i">
</textarea> <!> <!>`,1);function pe(i,t){B(t,!0);let e=_(t,"query",7),d=C(y([])),v=C("");T(()=>{e().query.startsWith(D)&&(e().query=e().query.replace(`${D}
`,""),o())});async function o(){b(d,y([])),b(v,"");let h=[];for(let c of e().query.split(/\r?\n/))c.startsWith("--")||h.push(c);let s=h.join(`
`),n=await G("/query",s);if(n.status===200)b(d,y(await n.json()));else{let c=await n.json();b(v,y(Object.values(c)[0]))}}var a=ue(),l=W(a);J(l),l.__keydown=[ce,o];var u=S(l,2);re(u,()=>p(v),h=>{var s=de(),n=k(s);w(s),j(()=>$(n,p(v))),m(h,s)});var r=S(u,2);ve(r,{get rows(){return p(d)},set rows(h){b(d,y(h))}}),F(l,()=>e().query,h=>e().query=h),m(i,a),M()}P(["keydown"]);var fe=L('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>');function he(i,t){let e=_(t,"color",8,"var(--col-err)"),d=_(t,"opacity",8,.9),v=_(t,"width",8,20);var o=fe();g(o,"stroke-width",2),j(()=>{g(o,"width",v()),g(o,"color",e()),g(o,"opacity",d())}),m(i,o)}function ye(i,t,e,d){p(t)?i.code==="Enter"&&(i.preventDefault(),e()):d()}function N(i,t,e){t.onClose(e())}var we=q('<div class="row svelte-17j88sk"><div role="button" tabindex="0"><!></div> <div class="close svelte-17j88sk"><div role="button" tabindex="0" class="close-inner svelte-17j88sk"><!></div></div></div>');function be(i,t){B(t,!0);let e=_(t,"tab",15),d=_(t,"tabSelected",15),v,o=H(()=>d()===e());function a(){let x=v.innerText;e(x),d(x)}function l(){p(o)||d(e())}var u=we(),r=k(u);ne(r,x=>v=x,()=>v),r.__click=l,r.__keydown=[ye,o,a,l];var h=k(r);V(h,X(t),{}),w(r);var s=S(r,2),n=k(s);n.__click=[N,t,e],n.__keydown=[N,t,e];var c=k(n);he(c,{}),w(n),w(s),w(u),j(()=>{ee(r,`${(p(o)?"tab selected":"tab")??""} svelte-17j88sk`),g(r,"contenteditable",p(o))}),K("blur",r,a),m(i,u),M()}P(["click","keydown"]);var ke=L('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path></svg>');function me(i,t){let e=_(t,"opacity",8,.9),d=_(t,"width",8,24);var v=ke();g(v,"stroke-width",2),j(()=>{g(v,"width",d()),g(v,"opacity",e())}),m(i,v)}function R(){f.push({id:te(6),query:ae})}var qe=q('<div id="tabs" class="svelte-9cpjlp"><!> <div role="button" tabindex="0" title="Add New Tab" class="ctrl add-new svelte-9cpjlp"><!></div></div> <!>',1);function ge(i,t){B(t,!0);let e=C(y(f[0].id)),d=H(()=>f.filter(s=>s.id===p(e))[0]);T(()=>{let s=f[f.length-1];s!=null&&s.query.startsWith(D)&&b(e,y(s.id))});function v(s){let n=f.map(c=>c.id).indexOf(s);p(e)===s?f.length===1?(f.push(se),f.shift(),b(e,y(f[0].id))):n===0?(f.shift(),b(e,y(f[0].id))):(f.splice(n,1),b(e,y(f[n-1].id))):f.splice(n,1)}var o=qe(),a=W(o),l=k(a);A(l,17,()=>f,s=>s.id,(s,n)=>{be(s,{get tab(){return p(n).id},set tab(c){p(n).id=c},get tabSelected(){return p(e)},set tabSelected(c){b(e,y(c))},onClose:v,children:(c,x)=>{Z();var O=Q();j(()=>$(O,p(n).id)),m(c,O)},$$slots:{default:!0}})});var u=S(l,2);u.__click=[R],u.__keydown=[R];var r=k(u);me(r,{}),w(u),w(a);var h=S(a,2);pe(h,{get query(){return p(d)}}),m(i,o),M()}P(["click","keydown"]);var _e=q('<meta property="description" content="Hiqlite Dashboard">');function xe(i){Y(t=>{var e=_e();z.title="Hiqlite",m(t,e)}),ge(i,{})}export{xe as component};
